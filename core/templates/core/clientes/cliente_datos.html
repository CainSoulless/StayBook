{% extends 'base.html' %}
{% load static %}

{% block title %}
    Mi Perfil - StayBook
{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4 fw-bold">Mi Perfil</h2>
    
    <div class="row justify-content-center">
        <div class="col-lg-8">

            {% if cliente %}
                <!-- Card de información del cliente -->
                <div class="card shadow-lg border-0 rounded-4 mb-4">
                    <div class="card-header text-white" style="background-color:#0c3a4d; border-radius:12px 12px 0 0;">
                        <h5 class="mb-0"><i class="bi bi-person-fill me-2"></i>Información del Cliente</h5>
                    </div>
                    <div class="card-body">
                        <p class="mb-2"><i class="bi bi-person-circle me-2"></i><strong>Nombre:</strong> {{ cliente.cliente_nombre }} {{ cliente.cliente_apellidos }}</p>
                        <p class="mb-2"><i class="bi bi-envelope-fill me-2"></i><strong>Email:</strong> {{ user.email }}</p>
                        <p class="mb-0"><i class="bi bi-telephone-fill me-2"></i><strong>Teléfono:</strong> {{ cliente.cliente_telefono|default:"No registrado" }}</p>
                    </div>
                </div>

                <!-- Card de última reserva -->
                {% if ultima_reserva %}
                <div class="card shadow-lg border-0 rounded-4">
                    <div class="card-header text-white" style="background-color:#0c3a4d; border-radius:12px 12px 0 0;">
                        <h5 class="mb-0"><i class="bi bi-calendar-check-fill me-2"></i>Última Reserva</h5>
                    </div>
                    <div class="card-body">
                        <p class="mb-2"><i class="bi bi-calendar-event me-2"></i><strong>Fecha de Inicio:</strong> {{ ultima_reserva.reserva_fecha_inicio }}</p>
                        <p class="mb-2"><i class="bi bi-calendar-event me-2"></i><strong>Fecha de Fin:</strong> {{ ultima_reserva.reserva_fecha_fin }}</p>
                        <p class="mb-0"><i class="bi bi-info-circle-fill me-2"></i><strong>Estado:</strong> {{ ultima_reserva.reserva_estado }}</p>
                    </div>
                </div>
                {% else %}
                <div class="alert alert-info text-center shadow-sm rounded-3">
                    <i class="bi bi-info-circle me-2"></i>No tienes reservas realizadas.
                </div>
                {% endif %}

            {% elif es_admin %}
                <div class="card shadow-lg border-0 rounded-4">
                    <div class="card-body text-center">
                        <h5 class="fw-bold text-success mb-3"><i class="bi bi-shield-lock-fill me-2"></i>Eres un administrador</h5>
                        <p>Puedes gestionar la aplicación desde el panel de administración.</p>
                        <a href="{% url 'adminrf_home' %}" class="btn text-white" style="background-color:#0c3a4d;">
                            Ir al Panel de Administración
                        </a>

                    </div>
                </div>

            {% else %}
                <div class="alert alert-danger text-center shadow-sm rounded-3">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i>No se encontró información del cliente.
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
