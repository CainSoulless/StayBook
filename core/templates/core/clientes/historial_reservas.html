{% extends 'base.html' %}
{% load static %}

{% block title %}
    Historial de Reservas - StayBook
{% endblock %}

{% block content %}
<!-- Hero superior -->
<section class="text-center py-5" style="background: #0c3a4d; color: white; border-radius: 0 0 20px 20px;">
  <div class="container">
    <h2 class="fw-bold mb-3">Historial de Reservas</h2>
    <p class="lead">Consulta tus reservas pasadas y actuales</p>
  </div>
</section>

<div class="container my-5">
  {% if reservas %}
    <div class="table-responsive shadow-sm rounded-4 overflow-hidden">
      <table class="table align-middle mb-0">
        <thead style="background-color: #0c3a4d; color: white;">
          <tr>
            <th scope="col" class="text-center">#</th>
            <th scope="col">Habitación</th>
            <th scope="col">Fecha de Inicio</th>
            <th scope="col">Fecha de Fin</th>
            <th scope="col" class="text-center">Estado</th>
            <th scope="col">Método de Pago</th>
          </tr>
        </thead>
        <tbody>
          {% for reserva in reservas %}
            <tr class="border-bottom">
              <td class="text-center fw-bold">{{ forloop.counter }}</td>
              <td>
                <a href="{% url 'detalle_habitacion' reserva.habitacion.id %}" class="text-decoration-none fw-semibold" style="color:#0c3a4d;">
                  Habitación {{ reserva.habitacion.numero }}
                </a>
              </td>
              <td>{{ reserva.fecha_inicio }}</td>
              <td>{{ reserva.fecha_fin }}</td>
              <td class="text-center">
                {% if reserva.estado == 'Confirmada' %}
                  <span class="badge bg-success">Confirmada</span>
                {% elif reserva.estado == 'Pendiente' %}
                  <span class="badge bg-warning text-dark">Pendiente</span>
                {% elif reserva.estado == 'Cancelada' %}
                  <span class="badge bg-danger">Cancelada</span>
                {% else %}
                  <span class="badge bg-secondary">{{ reserva.estado }}</span>
                {% endif %}
              </td>
              <td>{{ reserva.tipo_pago }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="text-center mt-5">
      <div class="alert alert-info py-4 px-3 shadow-sm rounded-4 d-inline-block" style="max-width: 500px;">
        <i class="bi bi-info-circle-fill me-2"></i>
        No tienes reservas registradas aún.
      </div>
    </div>
  {% endif %}

  <div class="text-center mt-5">
    <a href="{% url 'cliente_home' %}" class="btn text-white px-4 py-2 rounded-3 shadow-sm" style="background-color: #0c3a4d;">
      <i class="bi bi-arrow-left-circle me-2"></i>Volver al inicio
    </a>
  </div>
</div>
{% endblock %}
